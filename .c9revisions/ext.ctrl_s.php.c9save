{"ts":1363974342173,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php if (! defined('BASEPATH')) exit('No direct script access allowed');\n\n/**\n * Ctrl+s\n *\n * @package   Ctrl+s\n * @author    Scott-David Jones <enquiries@autumndev.co.uk>\n * @copyright Copyright (c) 2012 AutumnDev \n */\nclass Ctrl_s_ext {\n\n    var $name           = \"Ctrl+S\";\n    var $version        = 1.0;\n    var $description    = \"Shortcut for 'Update' or 'Save' on any Control Panel Screen\";\n    var $docs_url       = 'www.autumndev.co.uk';\n    var $settings_exist = 'n';\n    var $globalVars;\n    \n    /**\n     * Constructor\n     */\n    function __construct()\n    {\n        // -------------------------------------------\n        //  Make a local reference to the EE super object\n        // -------------------------------------------\n\n        $this->EE =& get_instance();\n    }\n        \n    // --------------------------------------------------------------------\n\n    /**\n     * Activate Extension\n     */\n    function activate_extension()\n    {\n        // -------------------------------------------\n        //  Add the row to exp_extensions\n        // -------------------------------------------\n\n        $this->EE->db->insert('extensions', array(\n            'class'    => __CLASS__,\n            'method'   => 'addSave',\n            'hook'     => 'cp_js_end',\n            'settings' => '',\n            'priority' => 10,\n            'version'  => $this->version,\n            'enabled'  => 'y'\n        ));\n    }\n\n    /**\n     * Update Extension\n     */\n    function update_extension($current = '')\n    {\n        if ($current == '' OR $current == $this->version)\n        {\n            return false;\n        }\n       \n        $this->EE->db->where('class', __CLASS__);\n        $this->EE->db->update(\n            'extensions',\n            array('version' => $this->version)\n        );\n    }\n\n    /**\n     * Disable Extension\n     */\n    function disable_extension()\n    {\n        // -------------------------------------------\n        //  Remove the row from exp_extensions\n        // -------------------------------------------\n\n        $this->EE->db->where('class', __CLASS__)\n            ->delete('extensions');\n    }\n    //input name=\"update\"\n    //input name=\"submit\" id=\"submit_button\"\n    function addSave(){\n        $js = \"\n        $.ctrl = function(key, callback, args) {\n            $(document).keydown(function(e) {\n            if(!args) args=[]; // IE cries without this\n            if(e.keyCode == key.charCodeAt(0) && (e.ctrlKey || e.metaKey)) {\n                callback.apply(this, args);\n                return false;\n            }\n            });\n        };\n        $.ctrl('S', function(s) {\n            //find any update/submit buttons\n            $('input[name=update], input[name=submit]').click();\n        });\n        \";\n\n        return $this->EE->extensions->last_call . $js;\n    }\n\n}"]],"start1":0,"start2":0,"length1":0,"length2":2808}]],"length":2808}
{"contributors":[],"silentsave":true,"ts":1363974357295,"patch":[[{"diffs":[[0," to the "],[1,"\n        "],[0,"EE super"]],"start1":660,"start2":660,"length1":16,"length2":25}]],"length":2817,"saved":false}
{"ts":1363974358826,"patch":[[{"diffs":[[0," \n      "],[1,"  //"],[0,"  EE sup"]],"start1":667,"start2":667,"length1":16,"length2":20}]],"length":2821,"saved":false}
